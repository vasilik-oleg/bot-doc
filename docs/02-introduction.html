<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2. Введение | Документация торговых роботов компании &quot;Викинг&quot;</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="icon" href="/bot-doc/favicon.ico">
    <meta name="description" content="Руководство пользователя, описание алгоритма и API">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/bot-doc/assets/css/0.styles.cb6403b3.css" as="style"><link rel="preload" href="/bot-doc/assets/js/app.e81ab8fa.js" as="script"><link rel="preload" href="/bot-doc/assets/js/3.5b3b6265.js" as="script"><link rel="preload" href="/bot-doc/assets/js/12.d623e0fe.js" as="script"><link rel="preload" href="/bot-doc/assets/js/10.8c8ad779.js" as="script"><link rel="prefetch" href="/bot-doc/assets/js/11.55febb22.js"><link rel="prefetch" href="/bot-doc/assets/js/13.1823ce22.js"><link rel="prefetch" href="/bot-doc/assets/js/14.ad5d64ed.js"><link rel="prefetch" href="/bot-doc/assets/js/15.9af162a9.js"><link rel="prefetch" href="/bot-doc/assets/js/16.9bde9826.js"><link rel="prefetch" href="/bot-doc/assets/js/17.ee50ca3e.js"><link rel="prefetch" href="/bot-doc/assets/js/18.87554097.js"><link rel="prefetch" href="/bot-doc/assets/js/19.9fcead24.js"><link rel="prefetch" href="/bot-doc/assets/js/4.69016f4b.js"><link rel="prefetch" href="/bot-doc/assets/js/5.74b65c17.js"><link rel="prefetch" href="/bot-doc/assets/js/6.8be4ae1f.js"><link rel="prefetch" href="/bot-doc/assets/js/7.fcd9b261.js"><link rel="prefetch" href="/bot-doc/assets/js/8.18baa8b6.js"><link rel="prefetch" href="/bot-doc/assets/js/9.f3d86c02.js"><link rel="prefetch" href="/bot-doc/assets/js/vendors~docsearch.30c42ed6.js">
    <link rel="stylesheet" href="/bot-doc/assets/css/0.styles.cb6403b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-doc/" class="home-link router-link-active"><img src="/bot-doc/images/vkg_logo.svg" alt="Документация торговых роботов компании &quot;Викинг&quot;" class="logo"> <span class="site-name can-hide">Документация торговых роботов компании &quot;Викинг&quot;</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bot-doc/docs/01-change-history.html" class="sidebar-link">1. История изменений</a></li><li><a href="/bot-doc/docs/02-introduction.html" aria-current="page" class="active sidebar-link">2. Введение</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-doc/docs/02-introduction.html#_2-1-краткое-описание-робота" class="sidebar-link">2.1. Краткое описание робота</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/02-introduction.html#_2-2-краткое-описание-интерфеиса" class="sidebar-link">2.2. Краткое описание интерфейса</a></li></ul></li><li><a href="/bot-doc/docs/03-getting-started.html" class="sidebar-link">3. Начало работы</a></li><li><a href="/bot-doc/docs/04-creating-connection.html" class="sidebar-link">4. Добавление подключений</a></li><li><a href="/bot-doc/docs/05-params-description.html" class="sidebar-link">5. Описание параметров</a></li><li><a href="/bot-doc/docs/06-algorithm-comments.html" class="sidebar-link">6. Примечания к алгоритму</a></li><li><a href="/bot-doc/docs/07-order-error.html" class="sidebar-link">7. Ошибки заявок</a></li><li><a href="/bot-doc/docs/08-c-api.html" class="sidebar-link">8. C++</a></li><li><a href="/bot-doc/docs/09-faq.html" class="sidebar-link">9. Часто задаваемые вопросы</a></li><li><a href="/bot-doc/docs/10-api.html" class="sidebar-link">10.API фронта 2.0</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-введение" tabindex="-1"><a href="#_2-введение" class="header-anchor">#</a> 2. Введение <div class="anchor-container" data-v-72af3cd3><span id="введение" data-v-72af3cd3></span></div></h1> <p><img src="/bot-doc/assets/img/bot-scheme.dd3da835.svg" alt="Doc"></p> <h2 id="_2-1-краткое-описание-робота" tabindex="-1"><a href="#_2-1-краткое-описание-робота" class="header-anchor">#</a> 2.1. Краткое описание робота <div class="anchor-container" data-v-72af3cd3><span id="краткое-описание-робота" data-v-72af3cd3></span></div></h2> <p>Данный робот может торговать несколькими одинаковыми алгоритмами. Один алгоритм, со всеми его настройками, далее будем называть портфелем. Каждый портфель робота должен содержать биржевые инструменты, которыми предполагается торговать или использовать их в расчётах. В портфеле может содержаться минимум один инструмент.</p> <p>Один из инструментов портфеля должен быть отмечен признаком <a href="/bot-doc/docs/05-params-description.html#is-first">Is first</a>, такой инструмент будем называть главным или первой ногой портфеля. Инструменты портфеля, не отмеченные признаком <a href="/bot-doc/docs/05-params-description.html#is-first">Is first</a>, будем называть второй ногой портфеля. В каждом портфеле робота есть параметры, которые задаются на весь портфель, назовём их <a href="/bot-doc/docs/05-params-description.html#параметры-портфеля">параметры портфеля</a>. Кроме них в портфеле есть параметры, которые задаются отдельно для каждого из инструментов портфеля, будем называть их <a href="/bot-doc/docs/05-params-description.html#параметры-инструментов-портфеля">параметры инструментов портфеля</a>. Так же, для всего портфеля задаются <a href="/bot-doc/docs/05-params-description.html#параметры-уведомлений">параметры уведомлений</a> (Notifications).</p> <p>Есть еще несколько параметров, которые задаются для каждого используемого инструмента каждого транзакционного подключения (<a href="/bot-doc/docs/05-params-description.html#параметры-позиций-по-инструментам">параметры позиций по инструментам</a> и <a href="/bot-doc/docs/05-params-description.html#параметры-позиций-по-валютам">параметры позиций по валютам</a>). Параметры делятся на редактируемые (т.е. собственно настройки) и отображаемые или расчётные (например, финансовый результат).</p> <p>Некоторые параметры портфеля и инструментов для большей гибкости могут быть заданы как формулы на <a href="/bot-doc/docs/08-c-api.html#c">Языке программирования C++</a>.</p> <p>Для каждого из портфелей робота можно выбрать <a href="/bot-doc/docs/05-params-description.html#p.portfolio_type">Type</a> используемого алгоритма. Основной алгоритм робота арбитражный. Цена заявок на покупку и продажу по главному инструменту в общем случае рассчитывается на основе цен других инструментов портфеля. Поддерживается работа в двух режимах. В режиме котирования (флаг <a href="/bot-doc/docs/05-params-description.html#p.quote">Quote</a> взведен) после включения торговли на покупку и продажу, в стакане по главному инструменту портфеля держатся заявки на покупку и продажу соответственно. Котирующая заявка переставляется при выполнении определенных условий, например, при отклонении цены выставленной заявки от расчетной цены. Если котирование отключено, то заявки по главному инструменту выставляются при появлении сигнала (выполнении определенного условия).</p> <p>Заявки по инструментам второй ноги выставляются после прохождения сделки по первой ноге. Направление заявок по инструментам второй ноги определяется направлением сделки по первой ноге, а также значением параметра <a href="/bot-doc/docs/05-params-description.html#on-buy">On buy</a> соответствующего инструмента.</p> <p>Робот может быть настроен как на выставление заявок второй ноги после прохождение каждой сделки по первой ноге, так и на более редкое выставление заявок по второй ноге. Объем для выставления по каждому инструменту (бумаге) второй ноги вычисляется исходя из текущей позиции портфеля по первой ноге и значения параметра <a href="/bot-doc/docs/05-params-description.html#count">Count</a> обеих бумаг таким образом, чтобы отношение &quot;новой&quot; позиции текущей бумаги (которая будет после прохождения сделки по еще невыставленной, но выставляемой в данный момент заявке) к позиции первой ноги было равно отношению значения параметра <a href="/bot-doc/docs/05-params-description.html#count">Count</a> второй ноги к значению параметра <a href="/bot-doc/docs/05-params-description.html#count">Count</a> первой ноги. Причем, если при определении &quot;новой&quot; позиции по бумаге в портфеле есть неисполненные заявки, то исходим из того, что они будут полностью сведены в сделку.</p> <p>Все заявки, выставляемые роботом, являются лимитными котировочными на всех поддерживаемых биржах.</p> <h2 id="_2-2-краткое-описание-интерфеиса" tabindex="-1"><a href="#_2-2-краткое-описание-интерфеиса" class="header-anchor">#</a> 2.2. Краткое описание интерфейса <div class="anchor-container" data-v-72af3cd3><span id="краткое-описание-интерфейса" data-v-72af3cd3></span></div></h2> <p>Основная страница интерфейса представлена набором таблиц-виджетов, которые расположены в выпадающем списке <code>Widgets</code>. Все виджеты могут быть открыты и закрыты в любом количестве и порядке, кроме виджета <code>Robot logs</code>, который открыт всегда.</p> <p>Во время работы робота могут возникать различные &quot;ошибки&quot; при выставлении и удалении заявок, такие ситуации не являются нештатной работой робота и могут быть вызваны причинами, не связанными с некорректной работой торгового робота, например, отсутствием денег на счете клиента. Все &quot;ошибки&quot; и еще некоторую информацию, связанную с работой программы, можно посмотреть в виджете <code>Robot logs</code>. Некоторые слишком часто приходящие сообщения будут отображаться в таблице не все, а 1 раз в 10 секунд и будут отмечены в конце сообщения символом xN, где N - количество не показанных сообщений. Некоторые сообщения, которые заведомо будут отклонены биржей, на биржу не отправляются. Такие &quot;ошибки&quot; помечены постфиксом &quot;_LOCAL&quot;.</p> <p>Исторические логи можно посмотреть, используя виджет <code>Robot logs history</code>. В настройках виджета можно выбрать один из предложенных периодов: сегодня, вчера, 5 дней, неделя, 10 дней, месяц или задать интересующий период самостоятельно с точностью до минуты.</p> <p>В виджетах <code>Robot logs</code>, <code>Robot logs history</code>, <code>Financial result for today</code>, <code>Finres history</code>, <code>Deals for today</code>, <code>Deals history</code> отображается локальное время пользователя.</p> <p>В основном интерфейсе робота есть функционал важных сообщений, которые показываются в виде модального окна, блокирующего взаимодействие пользователя с сайтом до подтверждения им кнопкой, что он ознакомился с сообщением. Сообщение появляется в момент отправки. Если в момент отправки пользователь был offline, то при ближайшем входе в приложение.
Если какое-то сообщение приходит в лог не реже, чем каждые 20 секунд и длится 10 минут, то пользователь получит об этом сообщение. Такое сообщение всплывает поверх всех окон и держится до тех пор, пока пользователь не нажмет ok. Первоначальный таймаут для получения такого сообщения 10 минут, потом 30 минут, 1 час, 3 часа и 6 часов, затем снова 10 минут и т.д.
Список отправленных сообщений также доступен для просмотра в меню <code>Notification</code> в личном кабинете пользователя под иконкой справа сверху.</p> <p>Стоит заметить, что все виджеты настраиваемые. Можно менять местами столбцы, регулировать их ширину, а так же скрывать ненужные <code>Columns</code>. Возможно одновременное открытие нескольких одинаковых виджетов с использованием в них разных настроек. Настроенное рабочее пространство можно сохранить в <code>Workspaces</code> и позже загружать его на другие устройства. Также есть возможность экспорта и импорта <code>Workspaces</code> через файл. Это позволяет пользователям с несколькими ролями перенести настроенные <code>Workspaces</code> из одной роли в другую.</p> <p>Для начала работы с роботом необходимо активировать нужные подключения для получения маркет-даты и добавить необходимые транзакционные подключения.
Маркет-дата подключения активируются в виджете <code>Data connections</code>. Транзакционные подключения добавляются в виджете <code>Trade connections</code>. Для создания портфеля необходимо выбрать виджет <code>Portfolios table</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bot-doc/docs/01-change-history.html" class="prev">
        1. История изменений
      </a></span> <span class="next"><a href="/bot-doc/docs/03-getting-started.html">
        3. Начало работы
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/bot-doc/assets/js/app.e81ab8fa.js" defer></script><script src="/bot-doc/assets/js/3.5b3b6265.js" defer></script><script src="/bot-doc/assets/js/12.d623e0fe.js" defer></script><script src="/bot-doc/assets/js/10.8c8ad779.js" defer></script>
  </body>
</html>
